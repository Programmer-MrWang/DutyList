<ci:SettingsPageBase

    x:Class="DutyListPlugin.Settings.DutySettingsPage"

    xmlns="https://github.com/avaloniaui"

    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

    xmlns:ci="clr-namespace:ClassIsland.Core.Abstractions.Controls;assembly=ClassIsland.Core"

    xmlns:models="clr-namespace:DutyListPlugin.Models"

    xmlns:conv="clr-namespace:DutyListPlugin.Converters">



  <ci:SettingsPageBase.Resources>

    <conv:StringToColorConverter x:Key="StringToColor"/>

  </ci:SettingsPageBase.Resources>



  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â• Tab ä¸»ç•Œé¢ â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

  <TabControl>



    <!-- â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å€¼æ—¥è¡¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” -->

    <TabItem Header="ðŸ“‹ å€¼æ—¥è¡¨">

      <ScrollViewer>

        <StackPanel Margin="16" Spacing="12">



          <!-- è½®æ¢æ€»è®¾ç½® -->

          <Border Background="#18FFFFFF" CornerRadius="6" Padding="14,10">

            <StackPanel Spacing="8">

              <TextBlock Text="é—´éš”è½®æ¢è®¾ç½®" FontSize="15" FontWeight="Bold"/>

              <TextBlock Name="StatusLabel" FontSize="13" Foreground="#AAFFFFFF" TextWrapping="Wrap"/>

              <StackPanel Orientation="Horizontal" Spacing="12" FlowDirection="LeftToRight">

                <StackPanel Spacing="4">

                  <TextBlock Text="ç¬¬ä¸€æ‰¹èµ·å§‹æ—¥æœŸ" FontSize="12" Foreground="#AAFFFFFF"/>

                  <DatePicker Name="StartDatePicker" SelectedDateChanged="OnStartDateChanged"/>

                </StackPanel>

                <StackPanel Spacing="4">

                  <TextBlock Text="æ¯æ‰¹æŒç»­ï¼ˆå¤©ï¼‰" FontSize="12" Foreground="#AAFFFFFF"/>

                  <!-- æ•´æ•°è¾“å…¥ï¼ŒFormatString="0" ç¦æ­¢å°æ•°æ˜¾ç¤ºï¼ŒIncrement=1 æ¯æ¬¡æ­¥è¿›1å¤© -->

                  <NumericUpDown Name="PeriodDaysSpin"

                                 Minimum="1" Maximum="365"

                                 Width="110"

                                 Increment="1"

                                 FormatString="0"/>

                </StackPanel>

              </StackPanel>

            </StackPanel>

          </Border>



          <!-- æ‰¹æ¬¡ç®¡ç† -->

          <StackPanel Spacing="6">

            <TextBlock Text="æ‰¹æ¬¡ç®¡ç†" FontSize="15" FontWeight="Bold"/>

            <StackPanel Orientation="Horizontal" Spacing="8">

              <ComboBox Name="GroupSelector" MinWidth="160"

                        SelectionChanged="OnGroupChanged"

                        PlaceholderText="é€‰æ‹©æ‰¹æ¬¡â€¦"/>

              <Button Content="ï¼‹ æ–°å»ºæ‰¹æ¬¡" Click="AddGroup"/>

              <Button Content="é‡å‘½å"       Click="RenameGroup"/>

              <Button Content="åˆ é™¤æ‰¹æ¬¡" Foreground="Red" Click="RemoveGroup"/>

            </StackPanel>

          </StackPanel>



          <!-- å½“å‰æ‰¹æ¬¡ç¼–è¾‘åŒº -->

          <StackPanel Name="GroupEditor" Spacing="8" IsVisible="False">

            <StackPanel Orientation="Horizontal" Spacing="8">

              <TextBlock Text="é€‰æ‹©æ˜ŸæœŸ" FontSize="13" VerticalAlignment="Center"/>

              <ComboBox Name="WeekSelector" Width="120" SelectionChanged="OnWeekChanged"/>

            </StackPanel>



            <ItemsControl Name="TimeSlotList">

              <ItemsControl.ItemTemplate>

                <DataTemplate DataType="{x:Type models:DutyTimeSlot}">

                  <Border BorderBrush="#44FFFFFF" BorderThickness="1" CornerRadius="4"

                          Padding="12" Margin="0,0,0,10">

                    <StackPanel Spacing="6">

                      <StackPanel Orientation="Horizontal" Spacing="8">

                        <TextBlock Text="å¼€å§‹ï¼š" VerticalAlignment="Center"/>

                        <TextBox Width="70" Text="{Binding StartText}" Watermark="08:00"/>

                        <TextBlock Text="ç»“æŸï¼š" VerticalAlignment="Center"/>

                        <TextBox Width="70" Text="{Binding EndText}"   Watermark="12:00"/>

                        <Button Content="åˆ é™¤æ—¶é—´æ®µ" Foreground="Red"

                                Tag="{Binding}" Click="RemoveTimeSlot"/>

                      </StackPanel>

                      <ItemsControl ItemsSource="{Binding Items}">

                        <ItemsControl.ItemTemplate>

                          <DataTemplate DataType="{x:Type models:DutyItem}">

                            <StackPanel Spacing="4" Margin="0,3">

                              <StackPanel Orientation="Horizontal" Spacing="4">

                                <TextBox Width="100" Text="{Binding Project}" Watermark="é¡¹ç›®åç§°"/>

                                <TextBox Width="68"  Text="{Binding Person1}" Watermark="äººå‘˜1"/>

                                <TextBox Width="68"  Text="{Binding Person2}" Watermark="äººå‘˜2"/>

                                <TextBox Width="68"  Text="{Binding Person3}" Watermark="äººå‘˜3"/>

                                <Button Content="âœ•" Tag="{Binding}" Click="RemoveItem" Margin="4,0,0,0"/>

                              </StackPanel>

                              <StackPanel Orientation="Horizontal" Spacing="6">

                                <TextBlock Text="é¡¹ç›®é¢œè‰²ï¼š" VerticalAlignment="Center" FontSize="12"/>

                                <ColorPicker Color="{Binding Color, Converter={StaticResource StringToColor}, Mode=TwoWay}"

                                             IsAlphaEnabled="False"/>

                              </StackPanel>

                            </StackPanel>

                          </DataTemplate>

                        </ItemsControl.ItemTemplate>

                      </ItemsControl>

                      <Button Content="ï¼‹ æ·»åŠ é¡¹ç›®" HorizontalAlignment="Left"

                              Tag="{Binding}" Click="AddItem"/>

                    </StackPanel>

                  </Border>

                </DataTemplate>

              </ItemsControl.ItemTemplate>

            </ItemsControl>



            <StackPanel Orientation="Horizontal" Spacing="8">

              <Button Content="ï¼‹ æ·»åŠ æ—¶é—´æ®µ" Click="AddTimeSlot"/>

              <Button Content="ðŸ’¾ ä¿å­˜é…ç½®"   Click="Save"/>

            </StackPanel>

          </StackPanel>



        </StackPanel>

      </ScrollViewer>

    </TabItem>



    <!-- â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è®¾ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” -->

    <TabItem Header="âš™ï¸ è®¾ç½®">

      <ScrollViewer>

        <StackPanel Margin="16" Spacing="16">



          <!-- æé†’è®¾ç½® -->

          <Border Background="#18FFFFFF" CornerRadius="6" Padding="14,10">

            <StackPanel Spacing="10">

              <TextBlock Text="æé†’è®¾ç½®" FontSize="15" FontWeight="Bold"/>



              <StackPanel Orientation="Horizontal" Spacing="10">

                <CheckBox Name="EnableReminderBox"

                          Content="åœ¨å€¼æ—¥æ—¶æ®µå¼€å§‹æ—¶å‘å‡ºæé†’"

                          IsChecked="{Binding EnableReminder}"

                          Checked="OnReminderChanged"

                          Unchecked="OnReminderChanged"/>

              </StackPanel>



              <StackPanel Orientation="Horizontal" Spacing="10"

                          IsEnabled="{Binding EnableReminder}">

                <CheckBox Name="EnableSoundBox"

                          Content="æ’­æ”¾æé†’è¯­éŸ³ï¼ˆTTS æœ—è¯»å€¼æ—¥å†…å®¹ï¼‰"

                          IsChecked="{Binding EnableReminderSound}"

                          Checked="OnSoundChanged"

                          Unchecked="OnSoundChanged"/>

              </StackPanel>

            </StackPanel>

          </Border>



          <!-- æ•°æ®ç®¡ç† -->

          <Border Background="#18FFFFFF" CornerRadius="6" Padding="14,10">

            <StackPanel Spacing="10">

              <TextBlock Text="æ•°æ®ç®¡ç†" FontSize="15" FontWeight="Bold"/>



              <StackPanel Orientation="Horizontal" Spacing="8">

                <Button Content="ðŸ“¤ å¯¼å‡ºå€¼æ—¥è¡¨"

                        Click="ExportConfig"

                        ToolTip.Tip="å°†å½“å‰é…ç½®å¯¼å‡ºä¸º JSON æ–‡ä»¶"/>

                <Button Content="ðŸ”„ é‡ç½®æ‰€æœ‰é…ç½®"

                        Foreground="Red"

                        Click="ResetConfig"

                        ToolTip.Tip="æ¸…ç©ºæ‰€æœ‰æ‰¹æ¬¡å’Œè®¾ç½®ï¼Œä¸å¯æ¢å¤ï¼"/>

              </StackPanel>



              <TextBlock Name="ExportResultLabel"

                         FontSize="12"

                         Foreground="#AAFFFFFF"

                         TextWrapping="Wrap"

                         IsVisible="False"/>

            </StackPanel>

          </Border>



          <!-- å…³äºŽ -->

          <Border Background="#18FFFFFF" CornerRadius="6" Padding="14,10">

            <StackPanel Spacing="4">

              <TextBlock Text="å…³äºŽ" FontSize="15" FontWeight="Bold"/>

              <TextBlock Text="å€¼æ—¥ç”Ÿåå•æ’ä»¶ v1.1" FontSize="13"/>

              <TextBlock Text="æ”¯æŒé—´éš”è½®æ¢ã€æ—¶æ®µæé†’ã€è‡ªå®šä¹‰é¢œè‰²ã€‚" FontSize="12" Foreground="#AAFFFFFF"/>

            </StackPanel>

          </Border>



        </StackPanel>

      </ScrollViewer>

    </TabItem>



  </TabControl>



</ci:SettingsPageBase>